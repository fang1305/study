<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/index/index.css">
    <link rel="stylesheet" href="../css/index/wraps.css">
    <title>首页</title>
    </head> 
    <body>
    	<header>
    		<div class="header pos_re">
    			<img src="../img/index/logo.png" alt="" height="50px">
    			<ul>
    				<li><a href="course.html">课程</a></li>
    				<li class="active">志愿大师</li>
    				<li>关于我们</li>
    				<li>下载APP</li>
    				<li class="userNo"><a href="##" class="login">登录</a>/<a href="register.html" class="register">注册</a></li>
    				<li class="dropdown userShow">
    					<img src="../img/index/icon_head.png" alt="" width="28px"><span class="dropdown-toggle" data-toggle="dropdown">用户名</span>
			            <ul class="dropdown-menu">
			              <li><a href="identityChoose.html" class="fs_12 text-center">切换身份</a></li>
			              <li><a href="#" class="fs_12 text-center">退出登录</a></li>
			            </ul>
    				</li>
    			</ul>
    		</div>
    	</header>
    	<div class="banner pos_re">
    		<div class="vip_box">
    			<div class="btn_group pos_ab fs_23">
    				<div class="days">距离高考30天</div>
    				<div class="open_btn hand_enter">开通志愿大师</div>
    			</div>
    		</div>
    		<img src="../img/index/banner.png" alt="" width="100%">
    	</div>
    	<!-- 筛选条件 -->
    	<div class="search_box pos_re">
    		<p class="title fs_23">输入分数、位次，进入预测</p>
    		<div class="place_choose pos_re choose_down">
                <input class="form-control" value="安徽省" class="place_name" readonly="readonly" />   
 				<img src="../img/index/down.png" alt="">
    			<!-- 地址 -->
 				<div class="place_all choose pos_re">
	    			<div class="tag"></div><em></em>
	    		</div>
    		</div>
    		<div class="place_choose pos_re choose_down">
                <input class="form-control" value="理科" class="class_name" readonly="readonly"/>   
 				<img src="../img/index/down.png" alt="">
 				<!-- 文理科 -->
	    		<div class="choose_list choose pos_re">
	    			<div class="tag">
	    				<div class='class_list active' value="2">理科</div>
	    				<div class='class_list' value="1">文科</div>
	    			</div>
	    			<em></em>
	    		</div>
    		</div>
    		<div class="place_choose score pos_re">
                <input class="form-control scoreS" placeholder="预估分数" />   
 				<span class="unit">分</span>
    		</div>
    		<div class="place_choose score pos_re ">
                <input class="form-control orderS" placeholder="位次" />   
				<span class="unit">名</span>
    		</div>
    		<!-- 按钮组 -->
    		<div class="search_btn">
    			<div class="send_btn  forecast">高考预测</div>
    			<a href="forecastTwo.html"><div class="send_btn">高考预测+自主招生预测</div></a>
    		</div>
    	</div>
    	
    	<!-- 多个类型按钮-带图标 -->
		<div class="icon_group_btn">
			<div class="icon_btn col-xs-2">
				<a href="findSchool.html">
					<img src="../img/index/find_school.png" width="80px" alt="">
					<p>找学校</p>
				</a>
			</div>
			<div class="icon_btn col-xs-2">
				<a href="controlLine.html">
					<img src="../img/index/find_icon2.png" width="80px" alt="">
					<p>省控线</p>
				</a>
			</div>
			<div class="icon_btn report col-xs-2">
				<a href="###">
					<img src="../img/index/find_icon3.png" width="80px" alt="">
					<p>成绩报告</p>
				</a>
			</div>
			<div class="icon_btn col-xs-2">
				<a href="interest/interestMain.html">
					<img src="../img/index/find_icon4.png" width="80px" alt="">
					<p>兴趣测试</p>
				</a>
			</div>
			<div class="icon_btn col-xs-2">
				<a href="findMajor.html">
					<img src="../img/index/find_icon5.png" width="80px" alt="">
					<p>专业就业</p>
				</a>
			</div>
			<div class="icon_btn col-xs-2">
				<a href="newTest/choosePlace.html">
					<img src="../img/index/find_icon6.png" width="80px" alt="">
					<p>新高考</p>
				</a>
			</div>
			<div style="clear:both;"></div>
		</div>

		<!-- 主要内容列表 -->
		<div class="main_content">
			<div class="left_content">
				<div class="title">
					<ul>
						<li class="active" label="3" value="live">直播</li>
						<li value="video" label="2">视频课</li>
						<li value="service" label="1">线下班课</li>
						<li value="one" label="6">1对1</li>
						<li value="file" label="4">资料</li>
						<li value="multiple" label="7">综合服务</li>
					</ul>
				</div>
				<div class="choose_part pos_re">
					<div class="choose_line science_all pos_re">
						<span><p class="pos_ab">科目:</p></span>
						<ul class="less_place">
							<li value='' label="product_type_id" class="active">全部</li>
						</ul>
						<a >
				   			<img src="../img/index/icon_down.png" alt="" width="18px" >
				   			<img src="../img/index/icon_up.png" alt="" width="18px" >
						</a>
					</div>

					<div class="pos_ab science" >
						<em></em>
						<div class="scienceMain">
							
						</div>
					</div>
				</div>
				<!-- 详细介绍 -->
				<div class="type_one row">
				</div>
				<div class="text-center">
					<nav aria-label="Page navigation">
						<span style="font-size:14px;"><ul class="pagination" id="pageUl"></ul></span> 
					</nav>
				</div>
			</div>
			<div class="right_content">
				<div class="title"><i></i>热门推荐</div>
				<div class="hotList"></div>	
			</div>
			<div style="clear:both;"></div>
		</div>
		<footer style="width: 100%;">
			<img src="../img/index/footer.png" alt="" width="100%">
		</footer>

		<!-- 弹框-激活VIP -->
		<div class="wrap">
			<!-- 选择激活或购买 -->
			<div class="wrap_content wrap_part">
    			<img src="../img/index/icon_close.png" width="100%" class="wrap_close" alt="">
    			<div class="container_box">
    				 <div class="title">开通志愿大师VIP</div>
    				 <a href="openVIP.html" class="submit_btn buy_vip mt_40">购买VIP</a>
    				 <a class="submit_btn active_vip">激活VIP</a>
    				 <div class="info_more">VIP的有效期从激活之日起至当届高考的8月31日，若是8月31日后激活的则到次年的8月31日过期。</div>
    			</div>
    		</div>
    		<!-- 去激活 -->
    		<div class="wrap_active wrap_part">
    			<img src="../img/index/icon_close.png" width="100%" class="wrap_close" alt="">
    			<div class="container_box">
    				 <div class="title">激活志愿大师VIP</div>
    				 <div class="input_box">
    				 	<input type="text" class="activeNum" placeholder="输入卡号">
    				 	<input type="password" class="activePass" placeholder="输入卡密">
    				 </div>
    				 <div class="info_more">VIP的有效期从激活之日起至当届高考的8月31日，若是8月31日后激活的则到次年的8月31日过期。</div>
    				 <input type="submit" class="submit_btn active_btn" value="激活VIP" />
    				 <div class="vip_buy"><span>还没有志愿大师VIP?</span><a href="#####">立即购买</a></div>
    			</div>
    		</div>
    		<!-- 选择专业 -->
    		<div class="wrap_part warp_box warp_choose" style="height: auto;min-height: 430px;">
    			<img src="../img/index/icon_close.png" width="100%" class="wrap_close btnClose" alt="">
    			<div class="container_box pos_re">
    				 <div class="title">选择专业</div>
    				 <div class="input_box pos_re">
						<input type="text" class="form-control text-left majorName" placeholder="请选择专业" style="text-align: left;" onkeyup="majorSelect(this.value,0)" value="ssss">
    					<img src="../img/index/icon_add.png" alt="" class="pos_ab addMajor">
    					<div class="pos_ab optionMajor"> 
    					 	<ul></ul>
    					</div>
    				 </div>
    				 <a href="###"><input type="submit" class="submit_btn mt_30 forecastBtn" value="开始预测" /></a>
    				 <!-- <a href="forecast/forecastMajor.html"><input type="submit" class="submit_btn mt_30 forecastBtn" value="开始预测" /></a> -->
    			</div>
    		</div>
    		<!-- 激活成功 -->
			<div class="wrap_success wrap_part">
				<img src="../img/index/icon_close.png" class="wrap_close successClose" />
				<div class="success_vip">
					<img src="../img/index/icon_success.png" alt="">
					<div class="title">激活成功</div>
					<div class="info_detail">您的志愿大师VIP有效期至xx年xx月xx日，现在您可以继续在电脑网页上使用，也可以登录高招APP上使用。</div>
					<div class="vip_buy"><span>还没有下载高招APP ？</span><a href="#####">立即下载</a></div>
				</div>
			</div>
    	</div>

		<!-- 用户登录 -->
		<div class="loginWrap"> 
    		<div class="wrap_login">
    			<img src="../img/index/icon_close.png" width="100%" class="wrap_close" alt="">
    			<div class="tab_box">
    				<div class="tab_type text-center fs_23 tab_active" href="#tel" data-toggle="tab">手机号登录</div>
    				<div class="tab_type text-center fs_23" href="#image" data-toggle="tab">扫码登录</div>
    			</div>
    			<div id="tel" class="tab-pane loginBox container_box fade in active loginTel">
    				 <div class="input_box">
    				 	<div class="pos_re user_box">
    				 		<input type="text" placeholder="用户名" onkeyup="userFun(value)" class="fs_14 userName">
    				 		<img src="../img/index/close.png" alt="" class="pos_ab img_title img_close" width="12px">
    				 		<img src="../img/index/user.png" alt="" width="20px" class="pos_ab img_do">
    				 	</div>
    				 	<div class="pos_re">
    				 		<input type="password" placeholder="密码" class="fs_14 pass passName">
    				 		<img src="../img/index/eye.png" alt="" class="eye pos_ab img_title hideEye" onclick="eyeOpen()" width="18px">
    				 		<img src="../img/index/eye_close.png" alt="" class="eye_close pos_ab img_title" onclick="eyeClose()" width="18px">
    				 		<img src="../img/index/password.png" alt="" width="20px" class="img_do pos_ab">
    				 	</div>
    				 </div>
    				 <div class="forget">
    				 	<input type="checkbox" class="remember" style="width: 23px;"><span>记住密码</span><span class="text-center error fs_12">用户名或密码错误</span>
    				 </div>
    				 <input type="submit" class="submit_btn mt_30 mb_20" onclick="loginFun()" value="登录" />
    				 <div class="vip_buy">
    				 	<span>如果您还没有注册，请在高招APP中注册后登录</span>
    				 	<p>去<a href="#####">下载高招APP</a></p>
    				 </div>
    			</div>
    			<div class="tab-pane fade loginBox container_box" id="image" >
    				<div class="tab_erType" style="width: 360px;">
    					<div class="er_box">
	    				 	<img src="../img/index/exp.png" alt="" width="160px" height="160px">
	    				 </div>
	    				 <img src="../img/index/erTel.png" alt="" height="176px" class="er_tel">
    				</div>
    				 <div class="row text-center er_info fs_12">点击高招APP扫一扫，扫描上方二维码登录</div>
    				 <div class="vip_buy mt_40">
    				 	<span>如果您还没有注册，请在高招APP中注册后登录</span>
    				 	<p>去<a href="#####">下载高招APP</a></p>
    				 </div> 
    			</div>
    		</div>
    	</div>


    </body> 
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../js/type.js"></script>
<script type="text/javascript" src="../js/searchparams1.js"></script>
<script type="text/javascript" src="../js/bootstrap-paginator.js"></script>
<script type="text/javascript" src="../js/common.js"></script>
<script>
	 console.log(searchList)
	var pageNow=1;
	var parObj={"type":'3',"product_type_id":'',"area":''}
	var majorArr=[];
	var majorNameArr=[];

	// 登录部分---开始
	$('.tab_type').click(function(){
		$(this).addClass('tab_active').siblings().removeClass('tab_active');
	})
	$('.login').click(function(){
		if(localStorage.getItem('userName')!=null&&localStorage.getItem('userName')!=''){
			$('.remember').prop('checked',true);
			$('.userName').val(localStorage.getItem('userName'))
			$('.passName').val(localStorage.getItem('password'))
			$('.img_close').show();
		}
		$('.loginWrap .error').hide();
		$('.loginWrap').show();
		$('.wrap_login').show();
		$('.wrap_login').animate({top:"50%"},"normal");
	});
	$('.user_box .img_title').click(function(){
		$('.user_box input').val('');
	});
	function userFun(val){
		if(val==''){
			$('.img_close').hide();
		}else{
			$('.img_close').show();
		}
	}
	function eyeOpen(){
		$('.eye_close').show();
		$('.eye').hide();
		$('.pass').attr('type','password')
	}
	function eyeClose(){
		$('.eye_close').hide();
		$('.eye').show();
		$('.pass').attr('type','text')
	}
	// 登录部分---结束

	//直播等类型选择
	function typeClick(type,check){
		parObj.area="";
		parObj.type=type;
		var listAll = searchList[check];
		$('.science_all').nextAll('.choose_line').remove();
		var html = "";
		for(var i=0;i<listAll.length;i++){
			html+='<div class="choose_line pos_re"><span><p class="pos_ab">'+listAll[i].name+'</p></span><ul>'

			for(var j=0;j<listAll[i].list.length;j++){
				html+='<li value='+listAll[i].list[j].id+' label='+listAll[i].field+'>'+listAll[i].list[j].name+'</li>'
			}
			if(listAll[i].list.length>8){
				html+='</ul><a ><img src="../img/index/icon_down.png" alt="" width="18px" ><img src="../img/index/icon_up.png" alt="" width="18px" ></a></div>'
			}else{
				html+='</ul></div>'
			}
		}
		$('.science_all').after(html);
	}
	$('.title ul li').click(function(){
		$(this).addClass('active').siblings().removeClass('active');
		typeClick($(this).attr('label'),$(this).attr('value'))
		filterClass(1,'')
	});
	typeClick(3,'live');
	for(var i=0;i<type.length;i++){
		$('.less_place').append('<li id='+type[i].id+' value='+type[i].id+' label="product_type_id">'+type[i].name+'</li>')
	}
	
	$('.choose_part').on('click','.choose_line img',function(){
		if($(this).index()==0){
			$(this).parents('.choose_line').css('height','auto');
			$(this).parents('.choose_line').siblings('.choose_line').css('height','47px');
			$('.science_all img').eq(0).css('display','block').siblings('img').css('display',"none");
		}else{
			$(this).parents('.choose_line').css('height','47px');
		}
		$(this).css('display','none');
		$(this).siblings().css('display','inline');
	});
	// 选择科目的下拉栏
	$('.science_all ul').on('click','li',function(){
		if($(this).html()!='全部'){
			if(!$(this).hasClass('active')){
				$('.science').addClass('activeCheck');
			}
			if($(this).html().split('(').length==1){
				console.log($(this).siblings('li'))
				for(var i=0;i<$(this).siblings('li').length;i++){
					$(this).siblings('li')[i].innerHTML = $(this).siblings('li')[i].innerHTML.split('(')[0]
				}
				parObj.product_type_id = $(this).attr('id');
				filterClass(1,'')
			}
			parObj.product_type_id = $(this).attr('id');
			var left = $(this).position().left;
			$('.science em').css('left',left+20);
			$('.science').css('top',$(this).position().top+47);
			var html="";
			for(var i=0;i<type.length;i++){
				if($(this).attr('id')==type[i].id){
					var arr=type[i].children;
					for(var j=0;j<arr.length;j++){
						html = html + '<div class="science_line">\
								<input type="radio" name="science" label='+arr[j].id+' value='+arr[j].name+'><span class="fs_12 color9">'+arr[j].name+'</span>\
								<ul class="color6 fs_12">';
						for(var t=0;t<arr[j].children.length;t++){
							html = html + '<li class="text-center" label='+arr[j].children[t].id+'>'+arr[j].children[t].name+'</li>';						
						}
						html = html + '<div class="clear"></div></ul></div>';
					}
				}
			}
			$('.scienceMain').html(html)
		}else{
			parObj.product_type_id = '';
			filterClass(1,'')
		}
	})
  
	//预测模块
	var placeA = [{"id":"12","name":"安徽省"},{"id":"34","name":"澳门"},{"id":"1","name":"北京市"},{"id":"22","name":"重庆市"},{"id":"13","name":"福建省"},{"id":"28","name":"甘肃省"},{"id":"19","name":"广东省"},{"id":"20","name":"广西省"},{"id":"24","name":"贵州省"},{"id":"21","name":"海南省"},{"id":"3","name":"河北省"},{"id":"8","name":"黑龙江"},{"id":"16","name":"河南省"},{"id":"17","name":"湖北省"},{"id":"18","name":"湖南省"},{"id":"10","name":"江苏省"},{"id":"14","name":"江西省"},{"id":"7","name":"吉林省"},{"id":"6","name":"辽宁省"},{"id":"5","name":"内蒙古"},{"id":"30","name":"宁夏"},{"id":"29","name":"青海省"},{"id":"15","name":"山东省"},{"id":"9","name":"上海市"},{"id":"4","name":"山西省"},{"id":"27","name":"陕西省"},{"id":"23","name":"四川省"},{"id":"32","name":"台湾"},{"id":"2","name":"天津市"},{"id":"33","name":"香港"},{"id":"31","name":"新疆"},{"id":"26","name":"西藏"},{"id":"25","name":"云南省"},{"id":"11","name":"浙江省"}];

	// 点击激活按钮-弹框
	var wrap = function(obj1,obj2){
		obj1.hide();
		obj2.fadeIn(100);
	}
	// 预测
	$(".open_btn").click(function(){
		$('.wrap').show();
		$('.warp_choose').hide();
		$('.warp_content').show();
		$('.wrap_content').animate({top:"50%"},"normal");
	})
	$('.successClose').click(function(){
        window.location.reload()
    })
	$('.wrap_close').click(function(){
		if($(this).hasClass('btnClose')){
			$('.wrap_choose').animate({top:"0"},"normal");
			$('.wrap').fadeOut(300);
			setTimeout(function(){
				$('.wrap_content').show();
				$('.wrap_choose').hide();
			},300)
		}else{
			$('.wrap_part').hide();
			$('.warp_choose').hide();
			$('.wrap_content').animate({top:"0"},"normal");
			$('.wrap_login').animate({top:"0"},"normal");
			$('.wrap_content').show();
			$('.wrap').fadeOut(300);
		}
		$('.loginWrap').fadeOut(300);
	})
	$(".active_vip").click(function(){
		wrap($('.wrap_part'),$('.wrap_active'));
	});
	//点击激活按钮...接口...实现VIP激活
	$('.active_btn').click(function(){
		activedVip($('.activeNum').val(),$('.activePass').val());
	})
	// 文理科筛选及地址
	$(document).bind('click',function(){
		$('.choose_down').find('.choose').removeClass('choose_active'); 
	}); 
	$('.choose_down').bind('click',function(e){ 
		e.stopPropagation();
		$(this).siblings().find('.choose').removeClass('choose_active'); 
		$(this).find('.choose').toggleClass('choose_active');
	}); 
	//预测高考
	$('.wrap_edit .choose_type').click(function(){
		$(this).addClass('active');
		$(this).siblings('.choose_type').removeClass('active');
	})
	var forecastArr={"province":'12',"subject":'1',"provinceName":'安徽省','subjectName':'文科'}
	// 判断之前是否有预测值
	forecastFun();
	function forecastFun(){
		$.ajax({
			url:'http://dev-www.imgaozhao.com/?r=api/forecast/info',
			type:'get',
			dataType:'json',
			success:function(data){
				data={
				    "errcode": 0,
				    "errmsg": "success",
				    "res": {
				        "subject_id": "1",
				        "subject_name": "文科",
				        "score": "650",
				        "order": "3",
				        "province_id": "34",
				        "province_name": "澳门",
				        "major": [
				            {
				                "id": "11",
				                "name": "3+2本科护理"
				            },{
				                "id": "11",
				                "name": "3+2本科护理"
				            }
				        ]
				    }
				}
				if(data.errcode==1){
					console.log('没有预测信息');
					for(var i=0;i<placeA.length;i++){
						if(i ==0 ){
							$('.place_all .tag').append("<div class='place_list active' value="+placeA[i].id+">"+placeA[i].name+"</div>");
						}else{
							$('.place_all .tag').append("<div class='place_list' value="+placeA[i].id+">"+placeA[i].name+"</div>");
						}
					}
					$('.majorName').val('');
					$('.majorName').attr('label','');
				}else if(data.errcode == 0){
					if(data.res.subject_id==1){
						$('.class_list').eq(1).addClass('active').siblings().removeClass('active');
					}
					for(var i=0;i<placeA.length;i++){
						if(placeA[i].id == data.res.province_id){
							$('.place_all .tag').append("<div class='place_list active' value="+placeA[i].id+">"+placeA[i].name+"</div>");
						}else{
							$('.place_all .tag').append("<div class='place_list' value="+placeA[i].id+">"+placeA[i].name+"</div>");
						}
					}
					forecastArr.province = data.res.province_id;
					forecastArr.provinceName = data.res.province_name;
					forecastArr.subjectName = data.res.subject_name;
					forecastArr.subject = data.res.subject_id;
					$('.place_choose input').eq(0).val(data.res.province_name)
					$('.place_choose input').eq(1).val(data.res.subject_name)
					$('.scoreS').val(data.res.score);
					$('.orderS').val(data.res.order);
					for(var i=0;i<data.res.major.length;i++){
						majorArr[i] = data.res.major[i].id;
						majorNameArr[i] = data.res.major[i].name;
						if(i>0){
							var html=' <div class="input_box pos_re">\
								<input type="text" class="form-control text-left majorName" placeholder="请选择专业" style="text-align: left;" onkeyup="majorSelect(this.value,'+i+')" value='+data.res.major[i].name+' label='+data.res.major[i].id+'>\
		    					<img src="../img/index/icon_add.png" alt="" class="pos_ab addMajor">\
		    					<div class="pos_ab optionMajor"> \
		    					 	<ul></ul>\
		    					</div>\
		    				 </div>';
							$('.warp_choose .input_box').last().after(html);
						}else if(i==0){
							$('.warp_choose .input_box').eq(i).find('.majorName').val(data.res.major[i].name)
							$('.warp_choose .input_box').eq(i).find('.majorName').attr('label',data.res.major[i].id)
						}
						
					}
			// "major":JSON.stringify(majorArr)
				}
				console.log(data);
			}
		})
	}
	//选择地址
	var  place=function(num,obj){
		console.log(obj)
		if(num==0){
			forecastArr.province = obj.attr('value');
			forecastArr.provinceName = obj.html();
		}else if(num == 1){
			forecastArr.subject = obj.attr('value')
			forecastArr.subjectName = obj.html()
		}
		obj.addClass('active');
		obj.siblings().removeClass('active');
		if(num!=2){
			$('.place_choose').eq(num).find('input').val(obj.html());
		}else{
			filterClass(1,obj);  
		}
		if(obj.attr('label') == "area"&&num==2){
			$('.choose_line').eq(0).css('height','47px');
			obj.addClass('activeArea').siblings().removeClass('activeArea');
			var left = obj.position().left;
			$('.science em').css('left',left+20);
			$('.science').css('top',obj.position().top+97);
			var html="";
			for(var i=0;i<searchList.service[0].list.length;i++){
				if(obj.attr('value')==searchList.service[0].list[i].id){
					$('.science').toggleClass('activeCheck')
					console.log(searchList.service[0].list[i])
					var arr=searchList.service[0].list[i].children;
					html = html + '<div class="science_line">\
							<ul class="color6 fs_12">';
					for(var j=0;j<arr.length;j++){
						html = html + '<li class="text-center" label="area" id='+arr[j].id+'>'+arr[j].name+'</li>';						
					}
					html = html + '<div class="clear"></div></ul></div>';
				}
			}
			$('.scienceMain').html(html)
		}

	}
	$('.place_all .tag').on('click','.place_list',function(){
		place(0,$(this))
	});
	$('.class_list').click(function(){
		place(1,$(this));
	});

	//课程筛选
	$('.choose_part').on('click','.choose_line li',function(){
		if($(this).attr('label')=="area"){
			for(var i=0;i<$(this).siblings('li').length;i++){
				$(this).siblings('li')[i].innerHTML=$(this).siblings('li')[i].innerHTML.split('(')[0]
			}
		}
		place(2,$(this));	
	})
	// 切换选择科目的浮框
	$('.science_all ul').on('click','li.active',function(){
		$('.science').toggleClass('activeCheck');
	})
	$('.choose_part').siblings().click(function(){
		$('.science').removeClass('activeCheck');
	})
	//选择科目详细信息---单选(早教/幼儿园/学前艺术)
	$('.science').on('click','li',function(){
		if($(this).attr('label')=="area"){
			$('.science li').removeClass('active');
			$(this).addClass('active');
			var area = $('.choose_part ul .activeArea').html();
			$('.choose_part ul .activeArea').html(area.split('(')[0]+'('+$(this).html()+')');
			$('.science').removeClass('activeCheck');
			parObj.area=$(this).attr('id');
		}else{
			for(var i=0;i<$('.science_all ul li').length;i++){
				$('.science_all ul li').eq(i).html($('.science_all ul li').eq(i).html().split('(')[0]);
			}
			var active = $('.science_all ul .active').html()
			for(var i=0;i<$('.science input[type=radio]').length;i++){
				$('.science input[type=radio]')[i].checked = false;
			}
			$(this).parents('.science_line').find('input')[0].checked = true;
			var activeVal = $('.scienceMain').find('input:checked').val();
			$('.science_all ul .active').html(active.split('(')[0]+'('+activeVal+':'+$(this).html()+')')
			$('.science li').removeClass('active');
			$(this).addClass('active');
			console.log($('.science input[type=radio]'))
			parObj.product_type_id=$(this).attr('label');
			$('.science').removeClass('activeCheck');
		}
		filterClass(1,'');
	});
	// 选择科目单选框
	$('.scienceMain').on('click','input',function(){
		$('.science_all ul .active').html($('.science_all ul .active').html().split('(')[0]+'('+$(this).val()+')')
		parObj.product_type_id=$(this).attr('label');
		filterClass(1,'');
	})
	// }
	// 课程列表显示-----
	var arrLabel=[];
	var filterClass = function(page,obj){
		pageNow = page;
		console.log(parObj);
		var skip = (pageNow-1)*10;
		var url="http://dev-www.imgaozhao.com/index.php?r=api/course/list&skip="+skip;
		if(obj!=""&&obj.attr('label')!="area"&&obj.attr('label')!="product_type_id"){
			arrLabel[obj.attr('label')]=obj.attr('value');
			if(arrLabel[obj.attr('label')]!=""){
				url+="&"+obj.attr('label')+"="+arrLabel[obj.attr('label')]
			}
		}
		parObj.product_type_id!=""?url+="&product_type_id="+parObj.product_type_id:'';
		parObj.type!=""?url+="&type="+parObj.type:"";
		parObj.area!=""?url+="&area="+parObj.area:"";
		$.ajax({
			url:url,
            type:"get",
            dataType: "json",
            success:function(data){
            	var list = data.res.list;
            	var html="";
            	for(var i=0;i<list.length;i++){
            		html+='<div class="content_detail">\
						<div class="product_img pos_re">\
							<a href="###" value='+list[i].id+'><img src='+list[i].img+' alt="" height="180px"></a>\
							<div class="text-center class_type pos_ab">'+list[i].tag+'</div>';
					if(list[i].time!=''){
						html+='<div class="class_time pos_ab">'+list[i].time+'</div>';
					}
					html+='</div>\
						<div class="product_info pos_re">\
							<div class="product_title fs_23"><a href="###" value='+list[i].id+'>'+list[i].title+'</a></div>\
							<p>主讲:'+list[i].teacher_name+'</p>\
							<p>机构:'+list[i].agent_name+'</p>\
							<p>学校:'+list[i].school_name+'</p>\
							<div class="product_price pos_ab">';
					if(list[i].price!="免费"){
						html+='<span class="price fs_23">'+list[i].price+'</span>';
					}else{
						html+='<span class="price_free fs_23">'+list[i].price+'</span>';
					}
								html+='<div class="classes_look">\
									<span>'+list[i].score+'</span>\
								</div>\
								<div class="classes_look">\
									<span>'+list[i].boughts+'</span>\
								</div>\
							</div>\
						</div>\
					</div>';
            	}
            	$('.type_one').html(html);
            	var allPage = data.res.total_count;
            	var element = $('#pageUl');
            	var options = {  
                    bootstrapMajorVersion:3,  
                    currentPage: page,//当前页面  
                    numberOfPages: 5,//一页显示几个按钮（在ul里面生成5个li）  
                    totalPages:allPage/10+1, //总页数 
                    itemTexts: function (type, page, current) {
				     switch (type) {
				      case "first": return "首页";
				      case "prev": return "上一页";
				      case "next": return "下一页";
				      case "last": return "末页";
				      case "page": return page;
				     }
				    },
                    onPageChanged:function (event, originalEvent, typePage, currentPage) {
		                console.log(typePage);
		            }
                }  
                element.bootstrapPaginator(options);  
            },
            error:function(e){
            }
        });   
	}

	filterClass(1,'');

	// 热门推荐
	// function popular(){
	// 	var html="";
	// 	$.ajax({
	// 		url:"http://dev-www.imgaozhao.com/index.php?r=api/course/recommend",
 //            type:"get",
 //            dataType: "json",
 //            success:function(data){
 //            	for(var i=0;i<data.res.length;i++){
	// 				html+='<div class="hot_part">\
	// 				<a href="###" value='+data.res[i].id+'>\
	// 					<img src='+data.res[i].img+' alt="" width="100%" height="180px">\
	// 					<div class="hot_info">'+data.res[i].title+'</div></a></div>'
 //            	}
 //            	$('.hotList').html(html);
 //            },
 //            error:function(e){
 //        	}
 //    	});
	// }
	popular();

	//查找专业
	function majorSelect(check,index){
		$.ajax({
			url:"http://dev-www.imgaozhao.com/index.php?r=api/course/search-major&key_words="+check,
            type:"get",
            dataType: "json",
            success:function(data){
            	console.log(data)
            	var html="";
            	for(var i=0;i<data.res.length;i++){
					html+='<li value='+data.res[i].id+'>'+data.res[i].name+'</li>'
            	}
            	$('.warp_choose .input_box').eq(index).find('.optionMajor').show();
            	$('.warp_choose .input_box').eq(index).find('.optionMajor ul').html(html);
            	$('.warp_choose .input_box').eq(index).find('.majorName').attr('label','');
            },
            error:function(e){
        	}
    	});
	}
	$('.warp_choose').on('click','.optionMajor ul li',function(){
		$('.optionMajor').hide();
		var indexM=$(this).parents('.input_box').index()-1;
		majorArr[indexM] = $(this).attr('value');
		majorNameArr[indexM] = $(this).html();
		$(this).parents('.input_box').find('.majorName').val($(this).html());
		$(this).parents('.input_box').find('.majorName').attr('label',$(this).attr('value'));
	});

	//选择专业---添加
	$('.warp_choose').on('click','.input_box .addMajor',function(){
		var index = $('.warp_choose').find('.input_box').length;
		var html=' <div class="input_box pos_re">\
						<input type="text" class="form-control text-left majorName" placeholder="请选择专业" style="text-align: left;" onkeyup="majorSelect(this.value,'+index+')">\
    					<img src="../img/index/icon_add.png" alt="" class="pos_ab addMajor">\
    					<div class="pos_ab optionMajor"> \
    					 	<ul></ul>\
    					</div>\
    				 </div>';
    	if($('.warp_choose').find('.input_box').length<3){
			$('.warp_choose .input_box').last().after(html);
    	}else{
    		alert("最多能添加三个专业");
    	}
	})
	// 志愿预测
	$('.forecast').click(function(){
		$('.wrap').show();
		// $('.majorName').val('');
		// $('.majorName').attr('label','');
		$('.wrap_content').hide();
		$('.wrap_content').animate({top:"50%"},"normal");
		$('.warp_choose').show();
		$('.warp_choose').animate({top:"50%"},"normal");
	});
	$('.forecastBtn').click(function(){
		console.log(forecastArr);
		var obj={
			"province":forecastArr.province,
			"subject":forecastArr.subject,
			"score":$('.scoreS').val(),
			"order":$('.orderS').val(),
			"major":JSON.stringify(majorArr)
		}
		localStorage.setItem('major',JSON.stringify(majorArr));
		localStorage.setItem('forecastArr',JSON.stringify(forecastArr));
		localStorage.setItem('majorNameArr',JSON.stringify(majorNameArr));
		localStorage.setItem("majorSearch",JSON.stringify(obj));
		url = "forecast/forecastMajor.html";//此处拼接内容
        window.location.href = url;
	});

	//判断是否开通志愿大师
	$.ajax({
        url:'http://dev-www.imgaozhao.com/index.php?r=api/forecast/judge-entrance',
        dataType:'json',
        type:'get',
        success:function(data){
            if(data.errcode==1){
            	$('.report').click(function(){
            		$('.wrap').show();
					$('.warp_choose').hide();
					$('.warp_content').show();
					$('.wrap_content').animate({top:"50%"},"normal");
            	})
            }else{
            	$('.report a').attr('href','scoreReport/scoreReport.html')
            }
        }
    })
</script>
</html>